<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../dist/custom-context.js"></script>
</head>
<body>

<canvas height="640" width="920" id="canvas"></canvas>
<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getCustomContext();
    // ctx.drawArrow(20, 20, 100, 100);
    // ctx.drawArrow(100, 100, 100, 300);
    // ctx.drawArrow(100, 300, 400, 200);
    // ctx.drawImageUrl('./img/sample-image.jpg', 100, 80, 150, 150, 30, 30, 100, 100);
    // ctx.drawCircleImageUrl('./img/sample-image.jpg', 10, 10, 100, 80, 60, 170, 170);
    // ctx.fillPolygon(300, 200, 50, 6);
    // ctx.strokePolygon(500, 300, 50, 8);
    // ctx.fillPolygon(50, 300, 60, 3);
    //
    // ctx.loadImage('./img/sample-image-2.jpg').then(img => {
    //     ctx.filterImage(img)
    //         .draw();
    // });

    // const w = 1400, h = 800;
    // ctx.fillRect(0, 0, w, h);
    // ctx.drawImageContainUrl('./img/sample-image-2.jpg', 0, 0, w, h);

    // ctx.drawFunction(x => Math.cos(x), {xTo: Math.PI * 4, yFrom: -1.5, yTo: 1.5, lineWidth: 10});
    // ctx.drawRadialFunction(x => Math.sin(.7 * x), {lineWidth: 10, xTo: 2.5, yTo: 1.5});
    // ctx.loadImage('./img/sample-image-2.jpg').then(img => {
    //     ctx.filterImage(img)
    //         .invert()
    //         .draw();
    // });
    // var x = 50, y = 100, cx = 200, cy = 200;
    // ctx.startAnimation(deltaTime => {
    //     var rotation = deltaTime / 1000;
    //     const params = mathTools.rotation(x, y, rotation);
    //     x = params.x;
    //     y = params.y;
    //     ctx.beginPath();
    //     ctx.arc(cx+x-5, cy+y-5, 10, 0, Math.PI*2);
    //     ctx.fill();
    //     ctx.closePath();
    // });
    // document.getElementById('ohoho').addEventListener('input', e => {
    //         ctx.straightenUrl('./img/sample_image-3.jpg', e.target.value).then(url => {
    //             ctx.drawImageUrl(url, 0, 0, 600, 400);
    //         });
    // });
    // var r = document.querySelector('#r'),
    //     g = document.querySelector('#g'),
    //     b = document.querySelector('#b');
    // function setRGB() {
    //     ctx.loadImage('./img/sample_image-3.jpg').then(img => {
    //         ctx.filterImage(img)
    //             .rgb(+r.value/100 || 1, +g.value/100 || 1, +b.value/100 || 1)
    //             .draw();
    //     });
    // }
    // r.addEventListener('input', setRGB);
    // g.addEventListener('input', setRGB);
    // b.addEventListener('input', setRGB);
    // setRGB();

    // ctx.drawImageUrl('./img/sample_image-3.jpg', 0, 0, canvas.width, canvas.height).then(() => {
    //     ctx.loadImageContain('./img/svgmask.png', canvas.width, canvas.height).then(img => {
    //         ctx.opacityMask(img);
    //     });
    // });
    // ctx.drawImageUrl('./img/sample_image-3.jpg', 0, 0, canvas.width, canvas.height).then(() => {
    //     ctx.circleLight(200, 200, 100, );
    // });
    // ctx.strokeStar(200, 200, 50, 100, 5);
    // ctx.fillStar(50, 50, 12, 40, 5);
    // ctx.strokePolygon(150, 80, 44, 5);
    // const options = {cx: 200, cy:200, r1: 80, r2: 160, vertexCount: 5, rotate: Math.PI * .7};
    // ctx.fillStar(options.cx, options.cy, options.r1, options.r2, options.vertexCount, options.rotate);
    // function drawStar(deg = 0) {
    //     ctx.clearAllRect();
    //     ctx.strokeStar(200, 200, 40, 100, 6, deg);
    //     requestAnimationFrame(() => drawStar(deg + .005))
    // }
    // drawStar();

    // var rectOptions = {x: 20, y:20, width: 80, height: 120};
    // ctx.addHotSpot('rect', rectOptions)
    //     .on('click', function(e) {
    //         alert('rect');
    //     }).draw();
    // ctx.addHotSpot('circle', {
    //     cx: 320,
    //     cy: 280,
    //     radius: 100
    // })
    //     .on('click', function(e) {
    //         alert('circle');
    //     }).draw();
    // ctx.addHotSpot('polygon', {
    //     cx: 120,
    //     cy: 200,
    //     radius: 80,
    //     rotate: Math.PI * .7,
    //     vertexCount: 6
    // }).on('click', function(e) {
    //         alert('polygon');
    //     }).draw();
    // ctx.addHotSpot('star', {
    //     cx: 420,
    //     cy: 200,
    //     r1: 50,
    //     r2: 100,
    //     rotate: 0,
    //     vertexCount: 7
    // }).on('click', function(e) {
    //     alert('star');
    // }).draw();
    // let timer = 0;
    // ctx.startRecord();
    // ctx.startAnimation(Δt => {
    //     timer += Δt;
    //     if(timer > 4020) {
    //         ctx.cancelAnimation();
    //         ctx.stopRecord();
    //         return;
    //     }
    //     const θ = timer * Math.PI * 2 / 2000;
    //     ctx.fillStyle = 'white';
    //     ctx.fillAll();
    //     ctx.fillStyle = 'black';
    //     ctx.beginPath();
    //     ctx.arc(canvas.width / 2 + Math.cos(θ) * 300, canvas.height / 2 + Math.sin(θ) * 300, 10, 0, Math.PI * 2);
    //     ctx.fill();
    //     ctx.closePath();
    // });
    // ctx.drawFuriesSeries(3/2, n => 0, n => (n%2 === 0 ? 0 : 6/n/Math.PI), {
    //     xFrom: 0,
    //     xTo: Math.PI * 11,
    //     yFrom: -2,
    //     yTo: 5,
    //     fill: true,
    //     depth: 1000
    // });
    // ctx.partialAnimation(1000, x => {
    //     ctx.clearAll();
    //     ctx.circle(10 + 600 * x, 100, 15);
    // }, ctx.ANIMATION_TYPE_LINEAR);
    // const x = [1, 2, 4, 7, 12, 16, 17, 20],
    //     y = [5, 7, 6, 4, 8, 10, 9, 15];
    // ctx.drawDataPolynomial(x, y, {xFrom: 0, xTo: 20, yFrom: 0, yTo: 30, fill: false});
    // ctx.fillStyle = 'green';
    // y.forEach((t, i) => ctx.circle(x[i]/20*canvas.width, canvas.height-t/30*canvas.height, 5));
    var n=100, t= 1;
    ctx.startAnimation((dt) => {
        // t-=.1;
        ctx.drawColors((x, y) => {
            return [Math.log(x**2 || 1/2**5)- y ** 2 - 5 * x - y + 2 **Math.abs(x/5) , Math.log(y**2|| 1/2**5) -  x**2 + 2 ** Math.abs(y/5)]
        },{xFrom: -n, xTo: n * 2, yFrom: -n, yTo:n});
    });

</script>
</body>
</html>
